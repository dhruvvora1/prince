"use strict";(self.webpackChunkTranding=self.webpackChunkTranding||[]).push([[779],{3195:function(e,n,t){t.r(n),t.d(n,{default:function(){return C}});var r=t(9722),a=t(4165),i=t(5861),s=t(9439),l=t(2791),c=t(3360),o=(t(5572),t(1413)),d=t(5316),u=t(3855),p=t(3239),h=t(1049),m=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.post("/learning/",n);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),x={Create:m,Delete:function(e){return h.Z.delete("/learning/".concat(e))},GetList:function(e,n){return h.Z.get("/learning/all?page=".concat(e,"&size=").concat(n))},GetListByID:function(e){return h.Z.get("/learning/".concat(e))},Update:function(e){return h.Z.post("/learning/update",e)}},f=t(184);function g(e){var n=e.formik,t=(0,l.useState)([]),r=(0,s.Z)(t,2),a=r[0],i=r[1];(0,l.useEffect)((function(){e.update&&0===a.length&&e.formik.values.file&&i([e.formik.values.file])}),[n]);return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(d.Z,(0,o.Z)((0,o.Z)({},e),{},{size:"large","aria-labelledby":"contained-modal-title-vcenter",onHide:function(){e.onHide(),n.resetForm(),i([])},centered:!0,backdrop:"static",children:[(0,f.jsx)(d.Z.Header,{closeButton:!0}),(0,f.jsx)(d.Z.Body,{className:"text-center",children:(0,f.jsx)("div",{className:"col-122",children:(0,f.jsx)("div",{className:"card custom-card",children:(0,f.jsxs)("form",{onSubmit:n.handleSubmit,children:[(0,f.jsx)("h4",{children:e.update?"Update Learning":"Add Learning"}),(0,f.jsx)("div",{className:"col-12",children:(0,f.jsxs)(u.Z.Group,{controlid:"validationFormik101",className:"position-relative",children:[(0,f.jsxs)(u.Z.Label,{style:{textAlign:"start",color:"#000",marginTop:"15px"},children:["Heading: ",(0,f.jsx)("span",{className:"tx-danger",children:"*"})]}),(0,f.jsx)(u.Z.Control,{type:"text",name:"heading",placeholder:"Heading",value:n.values.heading,onChange:n.handleChange}),n.errors.heading&&n.touched.heading?(0,f.jsxs)("p",{className:"text-start error",children:[" ",n.errors.heading]}):null]})}),(0,f.jsx)("div",{className:"col-12",children:(0,f.jsxs)(u.Z.Group,{controlid:"validationFormik101",className:"position-relative",children:[(0,f.jsxs)(u.Z.Label,{style:{textAlign:"start",color:"#000",marginTop:"15px"},children:["Description: ",(0,f.jsx)("span",{className:"tx-danger",children:"*"})]}),(0,f.jsx)(u.Z.Control,{type:"text",name:"description",placeholder:"Description",value:n.values.description,onChange:n.handleChange}),n.errors.description&&n.touched.description?(0,f.jsxs)("p",{className:"text-start error",children:[" ",n.errors.description]}):null]})}),(0,f.jsx)("div",{className:"col-12",children:(0,f.jsxs)(u.Z.Group,{controlid:"validationFormik101",className:"position-relative",children:[(0,f.jsxs)(u.Z.Label,{style:{textAlign:"start",color:"#000",marginTop:"15px"},children:["Link: ",(0,f.jsx)("span",{className:"tx-danger",children:"*"})]}),(0,f.jsx)(u.Z.Control,{type:"text",name:"link",placeholder:"Link",value:n.values.link,onChange:n.handleChange}),n.errors.link&&n.touched.link?(0,f.jsxs)("p",{className:"text-start error",children:[" ",n.errors.link]}):null]})}),(0,f.jsxs)(u.Z.Group,{className:"position-relative col-12",children:[(0,f.jsx)(u.Z.Control,{type:"file",name:"file",onChange:function(e){return function(e){var t=e.currentTarget.files[0];n.setFieldValue("file",t),i([t]);var r=URL.createObjectURL(t);i((function(e){return[r]}))}(e)},style:{marginTop:"15px"}}),e.update?(0,f.jsx)(f.Fragment,{children:e.photo?(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("img",{src:e.photo,className:"img-responsive2 mt-3 pos-relative",alt:"Image"})}):(0,f.jsx)(f.Fragment,{children:a&&a.map((function(e,n){return(0,f.jsx)("div",{className:"image",children:(0,f.jsx)("img",{src:e,className:"img-responsive2 mt-3",alt:"upload"})},e)}))})}):"",n.errors.file&&n.touched.file?(0,f.jsxs)("p",{className:"text-start error",children:[" ",n.errors.file]}):null]}),(0,f.jsx)("div",{children:(0,f.jsxs)(f.Fragment,{children:[" ",(0,f.jsx)(c.Z,{type:"submit",style:{display:"flex",marginLeft:"auto",marginRight:"15px",marginTop:"15px"},children:e.loading?(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,f.jsx)(p.Z,{size:30,style:{textAlign:"center",color:"#fff"}})})}):"Submit"})]})})]})})})})]}))})}function j(e){var n=e.card,t=function(){var t=(0,i.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.Delete(n);case 2:e.onHide(),e.getAllPage();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(d.Z,(0,o.Z)((0,o.Z)({},e),{},{size:"large","aria-labelledby":"contained-modal-title-vcenter",centered:!0,backdrop:"static",children:[(0,f.jsx)(d.Z.Header,{closeButton:!0}),(0,f.jsxs)(d.Z.Body,{className:"text-center",children:[(0,f.jsx)("i",{className:"icon ion-ios-checkmark-circle-outline tx-100 tx-danger  mg-t-20 "}),(0,f.jsx)("h4",{className:"tx-danger tx-semibold mg-b-20",children:"Delete!"}),(0,f.jsxs)("p",{className:"mg-b-20 mg-x-20 text-lowercase",children:["are you sure want to delete ",e.cardName," !"]}),(0,f.jsx)(c.Z,{type:"button",onClick:function(){return t(n)},variant:"danger",children:"Delete"})]})]}))})}t(9355);var v=t(5705),Z=t(8007),b=t(7574),k=(t(2426),t(3513)),N=(t(5106),t(5181)),y=t(7689),F=t(2144);var w=function(e){var n=e.name,t=e.columns,r=e.data,a=((0,y.UO)(),{columns:t,data:r});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"page-header2"}),(0,f.jsx)(F.Z,{className:"custom-card overflow-hidden",children:(0,f.jsxs)(F.Z.Body,{className:"pt-3 pl-3 pr-3",children:[(0,f.jsx)("div",{children:(0,f.jsx)("h6",{className:"main-content-label p-2  mb-1",children:n})}),(0,f.jsx)("div",{children:(0,f.jsx)(N.Z,(0,o.Z)((0,o.Z)({},a),{},{children:(0,f.jsx)(k.ZP,{columns:t,data:r,noHeader:!0,responsive:!0,defaultSortField:"id",defaultSortAsc:!1,striped:!0,center:!0,persistTableHead:!0,pagination:!0,highlightOnHover:!0})}))})]})})]})},C=(0,b.Z)((function(){var e=(0,l.useState)([]),n=(0,s.Z)(e,2),t=n[0],o=n[1],d=(0,l.useState)(0),u=(0,s.Z)(d,2),p=u[0],h=(u[1],(0,l.useState)([])),m=(0,s.Z)(h,2),b=m[0],k=(m[1],(0,l.useState)([])),N=(0,s.Z)(k,2),y=N[0],F=(N[1],(0,l.useState)(!1)),C=(0,s.Z)(F,2),S=C[0],L=C[1],A=function(){return L(!1)},D=(0,l.useState)(""),H=(0,s.Z)(D,2),T=H[0],V=H[1],B=(0,l.useState)(!1),G=(0,s.Z)(B,2),U=G[0],q=G[1],z=(0,l.useState)(""),O=(0,s.Z)(z,2),I=(O[0],O[1]),P=(0,l.useState)(""),R=(0,s.Z)(P,2),E=R[0],_=R[1],J=(0,l.useState)(!1),K=(0,s.Z)(J,2),M=K[0],Q=K[1],W=(0,l.useState)(""),X=(0,s.Z)(W,2),Y=X[0],$=X[1],ee=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.GetList(p+1,10);case 2:n=e.sent,o(n.data.apiresponse.data.learning);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){ee()}),[]);var ne=[{value:" ",label:"All"}].concat((0,r.Z)(b.map((function(e,n){return{value:y[n],label:e}})))),te=(0,r.Z)(b.map((function(e,n){return{value:y[n],label:e}}))),re=ne.find((function(e){return e.value===Object(y)})),ae=Z.Ry().shape({heading:Z.Z_().required("Heading is required"),description:Z.Z_().required("Description is required"),link:Z.Z_().required("Link is required")}),ie=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n,t){var r,i,s,l,c,o,d,u,p,h,m;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.id){e.next=22;break}return e.prev=1,r=n.file,i=n.heading,s=n.link,l=n.description,(c=new FormData).append("photo",r),c.append("heading",i),c.append("description",l),c.append("link",s),q(!0),e.next=11,x.Create(c);case 11:q(!1),ee(),A(),t.resetForm(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.log("add Communities error",e.t0);case 20:e.next=43;break;case 22:return e.prev=22,o=n.id,d=n.file,u=n.heading,p=n.link,h=n.description,(m=new FormData).append("id",o),m.append("heading",u),m.append("description",h),m.append("link",p),d&&m.append("photo",d),q(!0),e.next=34,x.Update(m);case 34:q(!1),A(),ee(),t.resetForm(),e.next=43;break;case 40:e.prev=40,e.t1=e.catch(22),console.log("update page error",e.t1);case 43:case"end":return e.stop()}}),e,null,[[1,17],[22,40]])})));return function(n,t){return e.apply(this,arguments)}}(),se=(0,v.TA)({initialValues:{heading:"",description:"",link:"",file:null},validationSchema:ae,onSubmit:ie}),le=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L(!0),""===n){e.next=15;break}return V(!0),e.next=5,x.GetListByID(n);case 5:t=e.sent,r=t.data.apiresponse.data,se.setFieldValue("id",r.id),se.setFieldValue("heading",r.heading),se.setFieldValue("description",r.description),se.setFieldValue("file",r.photo),se.setFieldValue("link",r.link),_(r.image),e.next=20;break;case 15:V(!1),se.setFieldValue("heading",""),se.setFieldValue("description",""),se.setFieldValue("link",""),se.setFieldValue("file","");case 20:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ce=[{name:(0,f.jsx)("b",{children:"Heading"}),selector:function(e){return e.heading},sortable:!0},{email:(0,f.jsx)("b",{children:"Description"}),selector:function(e){return e.description},sortable:!0},{name:(0,f.jsx)("b",{children:"Link"}),selector:function(e){return e.link},sortable:!0},{name:(0,f.jsx)("b",{children:"Photo"}),selector:function(e){return(0,f.jsx)("img",{src:e.photo,alt:"",style:{objectFit:"cover",margin:5},width:"100",height:"80"})},sortable:!0},{name:(0,f.jsx)("b",{children:"Action"}),selector:function(e){return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{children:[(0,f.jsx)(c.Z,{className:"btn-primary",onClick:function(){return le(e.id)},children:(0,f.jsx)("i",{className:"fas fa-edit"})}),(0,f.jsx)(c.Z,{className:"ms-2 btn-danger",onClick:function(){return n=e.id,Q(!M),void $(n);var n},children:(0,f.jsx)("i",{className:"fas fa-trash"})})]})})},sortable:!0}];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"page-header2"}),(0,f.jsxs)("div",{className:"d-flex",children:[(0,f.jsx)("div",{className:"mb-4 main-content-label tx-24",children:"All Learning"}),(0,f.jsx)("div",{className:"ms-auto me-4 d-flex",children:(0,f.jsxs)("button",{className:"text-white btn btn-primary ms-auto mb-4",onClick:function(){return le("")},type:"button",children:[(0,f.jsx)("i",{className:"fas fa-plus"}),"\xa0 Add"]})}),(0,f.jsx)(g,{show:S,onHide:A,update:T,formik:se,options:te,image:E,selectedOption2:re,handleTypeChange2:function(e){I(null===e||void 0===e?void 0:e.value),se.setFieldValue("type",null===e||void 0===e?void 0:e.value)},loading:U})]}),(0,f.jsx)("div",{className:"row",children:(0,f.jsx)(w,{name:"learning",columns:ce,data:t})}),(0,f.jsx)(j,{show:M,onHide:function(){return Q(!1)},card:Y,getAllPage:ee})]})}))},7574:function(e,n,t){var r=t(9439),a=t(2791),i=t(3949),s=t(184);n.Z=function(e){return function(){var n=(0,a.useState)(!0),t=(0,r.Z)(n,2),l=t[0],c=t[1];return(0,a.useEffect)((function(){var e=setTimeout((function(){c(!1)}),500);return function(){clearTimeout(e)}}),[]),l?(0,s.jsx)(i.Z,{}):(0,s.jsx)(e,{})}}},9355:function(e,n,t){t(1049)},5572:function(e,n,t){var r=t(1049),a={create:function(e){return r.Z.post("/blog/",e)},Delete:function(e){return r.Z.delete("/blog/".concat(e))},getAll:function(e,n){return r.Z.get("blog/all?page=".concat(e,"&size=").concat(n))},Update:function(e){return r.Z.post("/blog/update",e)},getByID:function(e){return r.Z.get("/blog/".concat(e))}};n.Z=a}}]);
//# sourceMappingURL=779.a860a831.chunk.js.map